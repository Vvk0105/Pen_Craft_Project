{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard</title>
    <link rel="stylesheet" href="{% static 'css/admindashboard.css' %}">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <style>
        /* Add any additional CSS styles here */
        table {
            width: 100%;
            border: 1px solid #ddd;
        }

        th {
            color: #00A3FF;
        }

        th, td {
            padding: 10px;
        }

        #chart_div2 {
            width: 100%;
            height: 300px;
        }

        .statistics {
            text-align: center;
        }

        .ring-container {
            text-align: center;
        }

        .ring-container h4 {
            margin-top: 10px;
        }
    </style>
</head>
<body>

<nav id="Admin-nav">
    <div class="container">
        <div class="row">
            <div class="col-md-4"></div>
            <div class="col-md-4">
                <div class="admin-logo">
                    <img src="{% static 'images/Group 199.png' %}">
                </div>
            </div>
            <div class="col-md-2"></div>
            <div class="col-md-2">
                <div class="admin-logoutbox" >
                    <svg xmlns="http://www.w3.org/2000/svg" width="1rem" height="1rem" viewBox="0 0 24 24">
                        <path fill="currentColor"
                            d="M12 21v-2h7V5h-7V3h7q.825 0 1.413.588T21 5v14q0 .825-.587 1.413T19 21zm-2-4l-1.375-1.45l2.55-2.55H3v-2h8.175l-2.55-2.55L10 7l5 5z" />
                    </svg>
                    {% if user.is_authenticated %}
                    <div class="icon">
                        <div class="admin-Logout-content">
                            <a href="{% url 'logout' %}">
                                <h3>Logout</h3>
                            </a>
                        </div>
                    </div>
                    {% endif %}
                </div>
                <div class="clearfix"></div>
            </div>
        </div>
    </div>
</nav>

<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
<script type="text/javascript">
  // Load the Visualization API and the corechart package.
  google.charts.load('current', {'packages':['corechart']});

  // Set a callback to run when the Google Visualization API is loaded.
  google.charts.setOnLoadCallback(drawChart);

  function drawChart() {
      var data = google.visualization.arrayToDataTable([
          ['Generation', 'Descendants'],
          [0, 1], [1, 33], [2, 269], [3, 2013]
      ]);

      var options = {
          title: 'Descendants by Generation',
          hAxis: {title: 'Generation', minValue: 0, maxValue: 3},
          vAxis: {title: 'Descendants', minValue: 0, maxValue: 2100},
          trendlines: {
              0: {
                  type: 'exponential',
                  visibleInLegend: true,
              }
          }
      };

      var chart = new google.visualization.ScatterChart(document.getElementById('chart_div2'));
      chart.draw(data, options);
  }
</script>

<section id="dashboard">
    <div class="row">
        <div class="col-md-2">
            <div class="sidebar">
                <div class="dashboard-box1 border">
                    <a style="text-decoration: none; color: white; font-weight: 100; font-size: 12px;" href="{% url 'admin_dashboard' %}">Dashboard ></a>
                </div>
                <h3>Master Writers</h3>
                <div class="dashboard-box2 border">
                    <a style="text-decoration: none; color: white; font-weight: 100; font-size: 12px;" href="{% url 'admin_master_view' %}">View request ></a>
                </div>
                <div class="dashboard-box3 border">
                    <a style="text-decoration: none; color: white; font-weight: 100; font-size: 12px;" href="{% url 'all_master' %}">All master writers ></a>
                </div>

                <h3>Users</h3>
                <div class="dashboard-box4 border">
                    <a style="text-decoration: none; color: white; font-weight: 100; font-size: 12px;" href="{% url 'all_writters' %}">View authors ></a>
                </div>
                <div class="dashboard-box5 border">
                    <a style="text-decoration: none; color: white; font-weight: 100; font-size: 12px;" href="{% url 'submission_history' %}">Submission history ></a>
                </div>
                <div class="dashboard-box6 border">
                    <a style="text-decoration: none; color: white; font-weight: 100; font-size: 12px;" href="{% url 'view_complaints' %}">View Complaints > </a>
                </div>
            </div>
        </div>
        <div class="col-md-10">

            <div class="row">
                <div class="col-md-8">
                    <div class="row">
                        <div class="col-md-4">
                            <div class="count-card blue">
                                <h1>123K</h1>
                                <h3 class="label">Label</h3>
                                <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48" fill="none">
                                    <path d="M13.875 35.25H27.375V32.75H13.875V35.25ZM13.875 25.25H34.125V22.75H13.875V25.25ZM13.875 15.25H34.125V12.75H13.875V15.25ZM6 44V4H42V44H6ZM8.25 41.5H39.75V6.5H8.25V41.5Z" fill="#00A3FF"/>
                                    </svg>

                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="count-card green">
                                <h1>123K</h1>
                                <h3 class="label">Label</h3>
                                <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48" fill="none">
                                    <path d="M13.875 35.25H27.375V32.75H13.875V35.25ZM13.875 25.25H34.125V22.75H13.875V25.25ZM13.875 15.25H34.125V12.75H13.875V15.25ZM6 44V4H42V44H6ZM8.25 41.5H39.75V6.5H8.25V41.5Z" fill="#00A3FF"/>
                                    </svg>

                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="count-card blue">
                                <h1>123K</h1>
                                <h3 class="label">Label</h3>
                                <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48" fill="none">
                                    <path d="M13.875 35.25H27.375V32.75H13.875V35.25ZM13.875 25.25H34.125V22.75H13.875V25.25ZM13.875 15.25H34.125V12.75H13.875V15.25ZM6 44V4H42V44H6ZM8.25 41.5H39.75V6.5H8.25V41.5Z" fill="#00A3FF"/>
                                    </svg>

                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-12">

                            <div class="chart-holder">
                                <h2>Registerd users</h2>
                                <div id="chart_div2"></div>
                            </div>
                           
                    <div class="statistics">
                        <h3>Statistics</h3>
                        <p>Total Masters: {{ total_masters }}</p>
                        <p>Total Users: {{ total_users }}</p>
                        <p>New Masters This Week: {{ weekly_new_masters }}</p>
                        <p>New Users This Week: {{ weekly_new_users }}</p>
                    </div>
                        </div>
                    </div>
                    
                </div>
                <div class="col-md-4">
                    <div class="ring-container-wrap">
                        <div id="multi" class="ring-container"></div>
                        <div class="ring-container">
                            <h4>Approved Masters: {{ masters_approved }}</h4>
                            <h4>Pending Requests: {{ masters_pending }}</h4>
                        </div>
                    </div>
                    
                </div>
            </div>
        </div>
    </div>
</section>

<script src="https://code.jquery.com/jquery-1.12.4.min.js"></script>
<script src="https://code.jquery.com/ui/1.13.2/jquery-ui.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>
<script src="{% static 'js/radialMultiProgress.js' %}"></script>
<script>
    $(document).ready(function() {
        var masters_approved = {{ masters_approved }};
        var masters_pending = {{ masters_pending }};
        var total_masters = {{ total_masters }};

        $("#multi").radialMultiProgress({
            thickness: 10,
            space: 0,
            antiAlias: true,
            scaleLabel: true,
            data: [
                { id: 'approvedBar', color: "#c5dba4", range: [0, total_masters], value: masters_approved },
                { id: 'pendingBar', color: "#91e67e", range: [0, total_masters], value: masters_pending }
            ]
        });
    });
</script>
</body>
</html>
